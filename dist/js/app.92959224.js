(function(e){function t(t){for(var r,o,i=t[0],l=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(d.length)d.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"06cf3":function(e,t,a){},"1e3d":function(e,t,a){"use strict";a("a18c")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],o={name:"app"},i=o,l=a("2877"),u=Object(l["a"])(i,s,n,!1,null,null,null),c=u.exports,m=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_container"},[a("div",{staticClass:"login_box"},[a("div",{staticStyle:{"padding-top":"5%"}},[e._v("Log in to the console")]),a("el-form",{ref:"loginRef",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{clearable:"",maxlength:"20"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[a("template",{slot:"prepend"},[a("div",{staticStyle:{color:"black"}},[e._v("username")])])],2)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"show-password":"",clearable:"",maxlength:"20"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[a("template",{slot:"prepend"},[a("div",{staticStyle:{color:"black"}},[e._v("password")])])],2)],1),a("el-form-item",[a("el-button",{staticClass:"log_btn",attrs:{type:"primary",plain:""},on:{click:e.login}},[e._v("sign in")])],1)],1)],1)])},p=[],f=(a("96cf"),a("1da1")),h={data:function(){return{loginForm:{username:"admin",password:"123456"},loginRules:{password:[{required:!0,message:"Please enter the password for console",trigger:"blur"}],username:[{required:!0,message:"Please enter the password for console",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs.loginRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users/login",e.loginForm);case 4:if(r=t.sent,s=r.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("Login failed"));case 8:return e.$message.success("login successful"),window.sessionStorage.setItem("token",s.data.token),t.next=12,e.$http.get("nodes/list");case 12:if(n=t.sent,o=n.data,200===o.meta.status){t.next=16;break}return t.abrupt("return",e.$message.error("Failed to receive the information of nodes"));case 16:e.$router.push("home");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},b=h,g=(a("b4b2"),Object(l["a"])(b,d,p,!1,null,"16915799",null)),w=g.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[e._v(" AGCCS-CTRL22 Console "),a("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("log out")])],1),a("el-container",[a("el-aside",{class:e.CollapseClass,attrs:{width:e.isCollapse?"48px":"160px"}},[a("div",{staticClass:"toggle-button",attrs:{id:"togle"},on:{click:e.togleCollapse}},[e._v(" >>> ")]),a("el-menu",{staticClass:"verticalMainMenu",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#409FFF","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":"1"}},[a("el-menu-item",{staticClass:"meshMenu",attrs:{index:"default"},on:{click:function(t){return e.saveNavState("/default")}}},[a("i",{staticClass:"el-icon-s-home"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Mesh")])]),a("el-submenu",{staticClass:"nodesMenu",attrs:{index:"nodes","hide-timeout":100}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v("Nodes")])]),a("el-menu-item",{attrs:{index:"nodesStatus"},on:{click:function(t){return e.saveNavState("/nodesStatus")}}},[a("i",{staticClass:"el-icon-monitor"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Nodes Status")])]),a("el-menu-item",{attrs:{index:"nodesInfo"},on:{click:function(t){return e.saveNavState("/nodesInfo")}}},[a("i",{staticClass:"el-icon-document"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Nodes Info")])])],2)],1),a("el-menu",{staticClass:"verticalSettingMenu",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#fff","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,"default-active":"2"}},[a("el-submenu",{staticClass:"userMenu",attrs:{index:"user","hide-timeout":100}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user-solid"}),a("span",[e._v("User")])]),a("el-menu-item",{attrs:{index:"PWD"},on:{click:function(t){e.pwdDialogVisible=!0}}},[a("i",{staticClass:"el-icon-user"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Change Password")])]),a("el-menu-item",{attrs:{index:"subUser"},on:{click:function(t){e.createUserVisible=!0}}},[a("i",{staticClass:"el-icon-s-custom"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Create Subuser")])])],2),a("el-submenu",{staticClass:"settingMenu",attrs:{index:"setting","hide-timeout":100}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-tools"}),a("span",[e._v("Setting")])]),a("el-menu-item",{attrs:{index:"meshSetting"},on:{click:e.showMeshDialog}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Mesh Setting")])]),a("el-menu-item",{attrs:{index:"meshInit"},on:{click:function(t){e.initDialogVisible=!0}}},[a("i",{staticClass:"el-icon-s-release"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Initialization")])])],2)],1),a("el-dialog",{staticClass:"pwdDialog",attrs:{title:"Password Modification",visible:e.pwdDialogVisible,width:"400px"},on:{"update:visible":function(t){e.pwdDialogVisible=t},close:e.pwdDialogClosed}},[a("el-form",{ref:"pwdFormRef",staticClass:"pwdForm",attrs:{model:e.pwdForm,rules:e.pwdFormRules,"label-width":"150px","status-icon:true":""}},[a("el-form-item",{attrs:{label:"username",prop:"username"}},[a("el-input",{attrs:{maxlength:"20",clearable:""},model:{value:e.pwdForm.username,callback:function(t){e.$set(e.pwdForm,"username",t)},expression:"pwdForm.username"}})],1),a("el-form-item",{attrs:{label:"origin password",prop:"password"}},[a("el-input",{attrs:{maxlength:"20","show-password":"",clearable:""},model:{value:e.pwdForm.password,callback:function(t){e.$set(e.pwdForm,"password",t)},expression:"pwdForm.password"}})],1),a("el-form-item",{attrs:{label:"new password",prop:"newPWD"}},[a("el-input",{attrs:{maxlength:"20","show-password":"",clearable:""},model:{value:e.pwdForm.newPWD,callback:function(t){e.$set(e.pwdForm,"newPWD",t)},expression:"pwdForm.newPWD"}})],1),a("el-form-item",{attrs:{label:"confirm password",prop:"checkNewPWD"}},[a("el-input",{attrs:{maxlength:"20",type:"password",clearable:""},model:{value:e.pwdForm.checkNewPWD,callback:function(t){e.$set(e.pwdForm,"checkNewPWD",t)},expression:"pwdForm.checkNewPWD"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.pwdDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pwdDialogConfirm}},[e._v("save")])],1)],1),a("el-dialog",{staticClass:"meshDialog",attrs:{title:"Mesh Setting",visible:e.meshDialogVisible,width:"300px"},on:{"update:visible":function(t){e.meshDialogVisible=t},close:e.meshDialogClosed}},[a("el-form",{ref:"meshFormRef",staticClass:"meshDialogForm",attrs:{model:e.meshForm,rules:e.meshFormRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"max Current",prop:"wholeMax"}},[a("el-input",{attrs:{maxlength:"5",clearable:""},model:{value:e.meshForm.wholeMax,callback:function(t){e.$set(e.meshForm,"wholeMax",t)},expression:"meshForm.wholeMax"}},[a("template",{slot:"append"},[a("div",{staticStyle:{width:"0px"}},[e._v("A")])])],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.meshDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.meshDialogConfirm}},[e._v("save")])],1)],1),a("el-dialog",{staticClass:"initDialog",attrs:{title:"Mesh Initialization",visible:e.initDialogVisible,width:"235px"},on:{"update:visible":function(t){e.initDialogVisible=t}}},[a("el-dialog",{attrs:{width:"330px",title:"Warning",visible:e.initConfirmVisible,"append-to-body":""},on:{"update:visible":function(t){e.initConfirmVisible=t},close:e.initConfirmClosed}},[a("div",{staticStyle:{color:"#E6A23C","margin-bottom":"5%"}},[e._v("Please enter your username and password to continue the initialization.")]),a("el-form",{ref:"initFormRef",staticClass:"pwdForm",attrs:{model:e.pwdForm,rules:e.pwdFormRules,"label-width":"100px","status-icon:true":""}},[a("el-form-item",{attrs:{label:"username",prop:"username"}},[a("el-input",{model:{value:e.pwdForm.username,callback:function(t){e.$set(e.pwdForm,"username",t)},expression:"pwdForm.username"}})],1),a("el-form-item",{attrs:{label:"password",prop:"password"}},[a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:e.pwdForm.password,callback:function(t){e.$set(e.pwdForm,"password",t)},expression:"pwdForm.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.initConfirmVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.initDialogConfirm}},[e._v("confirm")])],1)],1),a("div",{staticStyle:{color:"#E6A23C"}},[e._v("Are you sure to continue the initialization")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.initDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.initConfirmVisible=!0,e.initDialogVisible=!1}}},[e._v("confirm")])],1)],1),a("el-dialog",{staticClass:"createUser",attrs:{title:"Create  Subuser",visible:e.createUserVisible,width:"330px"},on:{"update:visible":function(t){e.createUserVisible=t},close:e.createUserClosed}},[a("el-dialog",{attrs:{width:"340px",title:"Warning",visible:e.createUserConfirmVisible,"append-to-body":""},on:{"update:visible":function(t){e.createUserConfirmVisible=t}}},[a("div",{staticStyle:{color:"#E6A23C","margin-bottom":"5%"}},[e._v("Please enter the username and password of subuser.")]),a("el-form",{ref:"createUserConfirmRef",staticClass:"pwdForm",attrs:{model:e.pwdForm,rules:e.pwdFormRules,"label-width":"150px","status-icon:true":""}},[a("el-form-item",{attrs:{label:"username",prop:"subUsername"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.pwdForm.subUsername,callback:function(t){e.$set(e.pwdForm,"subUsername",t)},expression:"pwdForm.subUsername"}})],1),a("el-form-item",{attrs:{label:"password",prop:"newPWD"}},[a("el-input",{attrs:{maxlength:"20","show-password":"",clearable:""},model:{value:e.pwdForm.newPWD,callback:function(t){e.$set(e.pwdForm,"newPWD",t)},expression:"pwdForm.newPWD"}})],1),a("el-form-item",{attrs:{label:"confirm password",prop:"checkNewPWD"}},[a("el-input",{attrs:{maxlength:"20",type:"password",clearable:""},model:{value:e.pwdForm.checkNewPWD,callback:function(t){e.$set(e.pwdForm,"checkNewPWD",t)},expression:"pwdForm.checkNewPWD"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createUserConfirmVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.createUserConfirm}},[e._v("confirm")])],1)],1),a("div",{staticStyle:{color:"#E6A23C","margin-bottom":"5%"}},[e._v("Please enter your username and password to create a subuser.")]),a("el-form",{ref:"adminCheckRef",staticClass:"pwdForm",attrs:{model:e.pwdForm,rules:e.pwdFormRules,"label-width":"100px","status-icon:true":""}},[a("el-form-item",{attrs:{label:"username",prop:"username"}},[a("el-input",{model:{value:e.pwdForm.username,callback:function(t){e.$set(e.pwdForm,"username",t)},expression:"pwdForm.username"}})],1),a("el-form-item",{attrs:{label:"password",prop:"password"}},[a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:e.pwdForm.password,callback:function(t){e.$set(e.pwdForm,"password",t)},expression:"pwdForm.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createUserVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.adminCheck}},[e._v("confirm")])],1)],1)],1),a("el-container",[a("el-main",[a("router-view")],1)],1)],1)],1)},x=[],k={data:function(){var e=this,t=function(e,t,a){var r=/^\d+(\.\d+)?$/;if(!t)return a(new Error("Max Current cannot be empty"));setTimeout((function(){r.test(t)?a():a(new Error("Please enter only numbers"))}),150)},a=function(t,a,r){a!==e.pwdForm.newPWD?r(new Error("The two passwords entered are not the same.")):r()};return{isCollapse:!0,activePath:"/default",pwdDialogVisible:!1,pwdForm:{username:"",password:"",newPWD:"",checkNewPWD:"",subUsername:""},pwdFormRules:{username:[{required:!0,message:"please enter the username",trigger:"blur"},{min:3,message:"Username length must be at least 3 digits",trigger:"blur"}],password:[{required:!0,message:"please enter the origin password",trigger:"blur"},{min:6,message:"Password length must be at least 6 digits",trigger:"blur"}],newPWD:[{required:!0,message:"please enter the new password",trigger:"blur"},{max:6,message:"Password length must be at least 6 digits",trigger:"blur"}],checkNewPWD:[{validator:a,trigger:"blur"},{required:!0,message:"please confirm the new password",trigger:"blur"},{max:6,message:"Password length must be at least 6 digits",trigger:"blur"}],subUsername:[{required:!0,message:"please enter the subusername",trigger:"blur"},{max:3,message:"Username length must be at least 3 digits",trigger:"blur"}]},meshDialogVisible:!1,meshForm:{},meshFormRules:{wholeMax:[{validator:t,trigger:"blur"}]},initDialogVisible:!1,initConfirmVisible:!1,createUserConfirmVisible:!1,createUserVisible:!1,CollapseClass:["Collapsed"]}},created:function(){this.activePath=window.sessionStorage.getItem("activePath")},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login")},togleCollapse:function(){this.isCollapse?(this.CollapseClass.pop(),this.CollapseClass.push("Collapsed")):(this.CollapseClass.pop(),this.CollapseClass.push("NotCollapsed")),this.isCollapse=!this.isCollapse,window.sessionStorage.setItem("activePath",this.activePath),this.isCollapse?document.getElementById("togle").innerHTML=">>>":document.getElementById("togle").innerHTML="<<<"},saveNavState:function(e){window.sessionStorage.setItem("activePath",e),this.activePath=e,this.isCollapse=!0,document.getElementById("togle").innerHTML=">>>"},pwdDialogClosed:function(){this.$refs.pwdFormRef.resetFields()},pwdDialogConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.pwdFormRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users/password",{username:e.pwdForm.username,password:e.pwdForm.password,newPassword:e.pwdForm.newPWD});case 4:if(r=t.sent,s=r.data,422!==s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("wrong user information"));case 8:if(e.pwdDialogVisible=!1,500!==s.meta.status){t.next=11;break}return t.abrupt("return",e.$message.error("failed to change the password"));case 11:e.$message.success("The password has been successfully modified！");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},showMeshDialog:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("mesh/setting");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("Failed to read the setting of mesh"));case 6:e.meshForm=r.data,e.meshDialogVisible=!0;case 8:case"end":return t.stop()}}),t)})))()},meshDialogClosed:function(){this.$refs.meshFormRef.resetFields()},meshDialogConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.meshFormRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("mesh/setting",{wholeMax:e.meshForm.wholeMax});case 4:if(r=t.sent,s=r.data,e.meshDialogVisible=!1,401!==s.meta.status){t.next=9;break}return t.abrupt("return",e.$message.warning("Please log in as admin to operate."));case 9:if(500!==s.meta.status){t.next=11;break}return t.abrupt("return",e.$message.error("Failed to change the setting"));case 11:e.$message.success("The setting of mesh has been successfully modified！");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},initConfirmClosed:function(){this.$refs.initFormRef.resetFields()},initDialogConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.initFormRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users/login",{username:e.pwdForm.username,password:e.pwdForm.password});case 4:if(r=t.sent,s=r.data,400!==s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("Wrong user information!"));case 8:return t.next=10,e.$http.post("mesh/init");case 10:if(n=t.sent,o=n.data,e.initConfirmVisible=!1,401!==o.meta.status){t.next=15;break}return t.abrupt("return",e.$message.warning("Please log in as admin to operate."));case 15:if(202===o.meta.status){t.next=17;break}return t.abrupt("return",e.$message.error("Failed to initialize the mesh!"));case 17:e.$message.success("The mesh has been successfully initialized!");case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},createUserClosed:function(){this.$refs.adminCheckRef.resetFields()},adminCheck:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.adminCheckRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users/login",{username:e.pwdForm.username,password:e.pwdForm.password});case 4:if(r=t.sent,s=r.data,400!==s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("Wrong user information!"));case 8:e.createUserVisible=!1,e.createUserConfirmVisible=!0;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},createUserConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.createUserConfirmRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users/addUser",{subUsername:e.pwdForm.subUsername,subPassword:e.pwdForm.newPWD});case 4:if(r=t.sent,s=r.data,e.createUserConfirmVisible=!1,401!==s.meta.status){t.next=9;break}return t.abrupt("return",e.$message.warning("Please log in as admin to operate."));case 9:if(500!==s.meta.status){t.next=11;break}return t.abrupt("return",e.$message.warning("Failed to create the new subuser!"));case 11:return t.abrupt("return",e.$message.success("Successfully added the new subuser!"));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},C=k,F=(a("1e3d"),Object(l["a"])(C,v,x,!1,null,"ca02cb20",null)),N=F.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("Center")]),a("el-breadcrumb-item",[e._v("Nodes Status")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{attrs:{span:10}},[e._v("Status of nodes")]),a("el-col",{attrs:{span:6,offset:8}})],1)],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.NodeStatusList.slice((this.queryInfo.pagenum-1)*this.queryInfo.pagesize,this.queryInfo.pagenum*this.queryInfo.pagesize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"30"}}),a("el-table-column",{attrs:{label:"name",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-link",[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return e.showNameDialog(t.row.id)}}})]),e._v(" "+e._s(t.row.nodeName)+" ")],1)]}}])}),a("el-table-column",{attrs:{prop:"connect",label:"connection",filters:[{text:"connected",value:1},{text:"disconnected",value:0}],"filter-method":e.filterHandler,sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{attrs:{align:"center"}},[a("el-button",{attrs:{size:"mini",circle:"",type:e.row.connect?"success":"info"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"ccss",label:"status",filters:e.workStatusFilter,"filter-method":e.filterHandler,sortable:"",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(" "+e._s(t.row.workStatus)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"Cur1",sortable:"",label:"cur1 /A",width:"100"}}),a("el-table-column",{attrs:{prop:"Cur2",sortable:"",label:"cur2 /A",width:"100"}}),a("el-table-column",{attrs:{prop:"Cur3",sortable:"",label:"cur3 /A",width:"100"}}),a("el-table-column",{attrs:{prop:"maxCur",sortable:"",label:"maxCur /A",width:"130"}}),a("el-table-column",{attrs:{label:"setting"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:"setting",placement:"top"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:""},on:{click:function(a){return e.showSettingDialog(t.row.id)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"button B",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",circle:""},on:{click:function(a){return e.operaButton(t.row.macADR,t.row.nodeName,t.row.connect)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"Blink",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-opportunity",size:"mini",circle:""},on:{click:function(a){return e.Blink(t.row.macADR,t.row.nodeName,t.row.connect)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"No Blink",placement:"top"}},[a("el-button",{attrs:{type:"info",icon:"el-icon-s-opportunity",size:"mini",circle:""},on:{click:function(a){return e.noBlink(t.row.macADR,t.row.nodeName,t.row.connect)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20,40],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})]],2),a("el-dialog",{staticClass:"NameDialog",attrs:{title:"edit node name",visible:e.NameDialogVisible,width:"300px"},on:{"update:visible":function(t){e.NameDialogVisible=t},close:e.nameDialogClosed}},[a("el-form",{ref:"nameFormRef",attrs:{model:e.nameForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Mac address",prop:"macADR"}},[a("el-input",{attrs:{disabled:""},model:{value:e.nameForm.macADR,callback:function(t){e.$set(e.nameForm,"macADR",t)},expression:"nameForm.macADR"}})],1),a("el-form-item",{attrs:{label:"Node name",prop:"nodeName"}},[a("el-input",{attrs:{clearable:"",maxlength:"15"},model:{value:e.nameForm.nodeName,callback:function(t){e.$set(e.nameForm,"nodeName",t)},expression:"nameForm.nodeName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.NameDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.NameDialogConfirm}},[e._v("save")])],1)],1),a("el-dialog",{staticClass:"settingDialog",attrs:{title:e.settingForm.nodeName?"settings of "+e.settingForm.nodeName:"settings of "+e.settingForm.macADR,visible:e.settingDialogVisible,width:"300px"},on:{"update:visible":function(t){e.settingDialogVisible=t},close:e.settingDialogClosed}},[a("el-form",{ref:"settingFormRef",staticClass:"settingform",attrs:{model:e.settingForm,rules:e.settingFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Workmode"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.checkNode(e.settingForm.workmode,e.settingForm.workStatus)}},model:{value:e.settingForm.workmode,callback:function(t){e.$set(e.settingForm,"workmode",t)},expression:"settingForm.workmode"}},[a("el-radio",{attrs:{label:"auto",disabled:!e.isReady}},[e._v("auto")]),a("el-radio",{attrs:{label:"manual",disabled:!e.isReady}},[e._v("manual")])],1)],1),a("el-form-item",{attrs:{label:"Max current",prop:"smaxCur"}},[a("el-input",{attrs:{clearable:"",maxlength:"5",disabled:e.isAuto},model:{value:e.settingForm.smaxCur,callback:function(t){e.$set(e.settingForm,"smaxCur",t)},expression:"settingForm.smaxCur"}},[a("template",{slot:"append"},[a("div",{staticStyle:{width:"0px"}},[e._v("A")])])],2)],1),a("el-form-item",{attrs:{label:"Phases"}},[a("el-checkbox",{attrs:{disabled:e.isAuto},on:{change:e.handleSelAllPhases},model:{value:e.selAllPhases,callback:function(t){e.selAllPhases=t},expression:"selAllPhases"}},[e._v("All")]),a("el-checkbox-group",{attrs:{disabled:e.isAuto},on:{change:e.handleSelPhases},model:{value:e.selPhases,callback:function(t){e.selPhases=t},expression:"selPhases"}},e._l(e.Phases,(function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.settingDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.settingDialogConfirm}},[e._v("save")])],1)],1)],1)},D=[],$=[1,2,3],R={data:function(){var e=this,t=function(t,a,r){var s=/^\d+(\.\d+)?$/;a&&(s.test(a)?(e.settingForm.cmaxCur>=5&&a>e.settingForm.cmaxCur&&r(new Error("max current should be less than the safe current "+e.settingForm.cmaxCur+" A")),a<=5&&r(new Error("max current should be more than the 5 A"))):r(new Error("please enter only numbers"))),r()};return{queryInfo:{query:"",pagenum:1,pagesize:10},NodeStatusList:[],total:0,nodeInfo:{},NameDialogVisible:!1,nameForm:{},settingDialogVisible:!1,settingForm:{},settingFormRules:{smaxCur:[{validator:t,trigger:"blur"}],maxCur:[{validator:t,trigger:"blur"}]},isAuto:!0,isReady:!1,selAllPhases:!0,selPhases:[1,2,3],Phases:$,workStatusFilter:[{text:"Off",value:0},{text:"Wait EV",value:1},{text:"Negotiation",value:2},{text:"Charging",value:3},{text:"Pause",value:4},{text:"Wait Power",value:5},{text:"Err",value:9}]}},created:function(){this.getNodeStatusList(),this.keepAlive()},methods:{getNodeStatusList:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.console.log("production"),t.next=3,e.$http.get("nodes/status");case 3:if(a=t.sent,r=a.data,200===r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error("Failed to receive the data of nodes"));case 7:e.NodeStatusList=r.data,s=0;case 9:if(!(s<e.NodeStatusList.length)){t.next=37;break}e.NodeStatusList[s].nodeName||(e.NodeStatusList[s].nodeName=e.NodeStatusList[s].macADR),n=e.NodeStatusList[s].workStatus%10,o="",e.NodeStatusList[s].ccss=Math.floor(e.NodeStatusList[s].workStatus/10),t.t0=e.NodeStatusList[s].ccss,t.next=0===t.t0?17:1===t.t0?19:2===t.t0?21:3===t.t0?23:4===t.t0?25:5===t.t0?27:9===t.t0?29:31;break;case 17:return o="Off["+n+"]",t.abrupt("break",33);case 19:return o="Wait EV["+n+"]",t.abrupt("break",33);case 21:return o="Negotiation["+n+"]",t.abrupt("break",33);case 23:return o="Charging["+n+"]",t.abrupt("break",33);case 25:return o="Pause["+n+"]",t.abrupt("break",33);case 27:return o="Wait power["+n+"]",t.abrupt("break",33);case 29:return o="Err["+n+"]",t.abrupt("break",33);case 31:return o="Fatal Err",t.abrupt("break",33);case 33:e.NodeStatusList[s].workStatus=o;case 34:s++,t.next=9;break;case 37:e.total=e.NodeStatusList.length;case 38:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getNodeStatusList()},handlePageChange:function(e){this.queryInfo.pagenum=e,this.getNodeStatusList()},changeNodeStatus:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put("nodes/status",{id:e.id,maxCur:e.maxCur,workmode:e.workmode,workStatus:e.workStatus});case 2:if(r=a.sent,s=r.data,401!==s.meta.status){a.next=6;break}return a.abrupt("return",t.$message.warning("Please log in as admin to operate."));case 6:if(202===s.meta.status){a.next=9;break}return e.workStatus=!e.workStatus,a.abrupt("return",t.$message.error("Failed in changing the status of node"));case 9:t.$message.success("Success in changing the status of node");case 10:case"end":return a.stop()}}),a)})))()},showNameDialog:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("nodes/list?id="+e);case 2:if(r=a.sent,s=r.data,200===s.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("Failed to read the information of node"));case 6:t.nameForm=s.data,t.NameDialogVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},nameDialogClosed:function(){this.$refs.nameFormRef.resetFields()},NameDialogConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("nodes/list",{id:e.nameForm.id,nodeName:e.nameForm.nodeName});case 2:if(a=t.sent,r=a.data,e.NameDialogVisible=!1,401!==r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.warning("Please log in as admin to operate."));case 7:if(202===r.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error("Failed to change the name of node！"));case 9:return e.getNodeStatusList(),t.abrupt("return",e.$message.success("The name of the node has been successfully modified！"));case 11:case"end":return t.stop()}}),t)})))()},showSettingDialog:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("nodes/status?id="+e);case 2:if(r=a.sent,s=r.data,200===s.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("Failed to read the information of node"));case 6:if(s.data.connect){a.next=8;break}return a.abrupt("return",t.$message.error("No connection to the node"));case 8:t.selPhases=[];while(s.data.sPhases>0)t.selPhases.push(s.data.sPhases%10),s.data.sPhases-=s.data.sPhases%10,s.data.sPhases/=10;t.selAllPhases=3===t.selPhases.length,t.settingForm=s.data,t.checkNode(t.settingForm.workmode,t.settingForm.workStatus),t.settingDialogVisible=!0;case 14:case"end":return a.stop()}}),a)})))()},settingDialogClosed:function(){this.$refs.settingFormRef.resetFields()},settingDialogConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.settingFormRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:for(e.settingForm.Phases="",r=0;r<e.selPhases.length;r++)e.settingForm.Phases=10*e.settingForm.Phases+e.selPhases[r];return t.next=6,e.$http.put("nodes/status",{id:e.settingForm.id,macADR:e.settingForm.macADR,sPhases:e.settingForm.Phases,smaxCur:e.settingForm.smaxCur,workmode:e.settingForm.workmode,workStatus:e.settingForm.workStatus});case 6:if(s=t.sent,n=s.data,e.settingDialogVisible=!1,401!==n.meta.status){t.next=11;break}return t.abrupt("return",e.$message.warning("Please log in as admin to operate."));case 11:if(404!==n.meta.status){t.next=13;break}return t.abrupt("return",e.$message.warning("Operation of unconnected nodes forbidden."));case 13:if(406!==n.meta.status){t.next=15;break}return t.abrupt("return",e.$message.error("No available current remain in all phases."));case 15:if(402!==n.meta.status){t.next=17;break}return t.abrupt("return",e.$message.warning("Please choose other phases and maxcur, cause the given parameter exceeds the capacity of mesh."));case 17:if(e.getNodeStatusList(),201!==n.meta.status){t.next=23;break}return e.$message({message:"MaxCur has been adjusted to avoid exceeding capacity of mesh.",offset:30}),t.abrupt("return",e.$message({message:"The setting of the node has been modified with adjusted parameter!",offset:70,type:"success"}));case 23:if(200!==n.meta.status){t.next=25;break}return t.abrupt("return",e.$message.success("The setting of the node has been successfully modified！"));case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},keepAlive:function(){var e=this;setInterval((function(){e.getNodeStatusList()}),3e3)},operaButton:function(e,t,a){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return",r.$message.error("No connection to the node"));case 2:return s.next=4,r.$http.put("nodes/buttonB",{macADR:e});case 4:if(n=s.sent,o=n.data,401!==o.meta.status){s.next=8;break}return s.abrupt("return",r.$message.warning("Please log in as admin to operate."));case 8:if(200!==o.meta.status){s.next=10;break}return s.abrupt("return",r.$message.success("Button of node "+t+" is remotely pressed."));case 10:return s.abrupt("return",r.$message.error("Failed to control The node "+t+"."));case 11:case"end":return s.stop()}}),s)})))()},checkNode:function(e,t){this.isAuto="auto"===e,this.isReady=t<60&&t>=10},handleSelAllPhases:function(e){this.selPhases=e?$:[]},handleSelPhases:function(e){var t=e.length;this.selAllPhases=t===this.Phases.length},filterHandler:function(e,t,a){var r=a.property;return t[r]===e},Blink:function(e,t,a){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return",r.$message.error("No connection to the node"));case 2:return s.next=4,r.$http.put("nodes/Blink",{macADR:e});case 4:if(n=s.sent,o=n.data,401!==o.meta.status){s.next=8;break}return s.abrupt("return",r.$message.warning("Please log in as admin to operate."));case 8:if(200!==o.meta.status){s.next=10;break}return s.abrupt("return",r.$message.success("The node "+t+" blinks now."));case 10:return s.abrupt("return",r.$message.error("Failed to control The node "+t+"."));case 11:case"end":return s.stop()}}),s)})))()},noBlink:function(e,t,a){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return",r.$message.error("No connection to the node"));case 2:return s.next=4,r.$http.put("nodes/noBlink",{macADR:e});case 4:if(n=s.sent,o=n.data,401!==o.meta.status){s.next=8;break}return s.abrupt("return",r.$message.warning("Please log in as admin to operate."));case 8:if(200!==o.meta.status){s.next=10;break}return s.abrupt("return",r.$message.success("The node "+t+" stops blinking now."));case 10:return s.abrupt("return",r.$message.error("Failed to control The node "+t+"."));case 11:case"end":return s.stop()}}),s)})))()}}},_=R,S=(a("e05e"),a("7e41"),Object(l["a"])(_,y,D,!1,null,"5d5e59ef",null)),P=S.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("Center")]),a("el-breadcrumb-item",[e._v("Nodes Info")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{attrs:{span:5}},[e._v("Nodes Information")]),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.getNodesInfoList}},[e._v("Refresh")])],1),a("el-col",{attrs:{span:3,offset:13}},[a("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.showFirmwareDialog}},[e._v("Firmware"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:function(t){return e.print("infoTable")}}},[e._v("Print")])],1)],1)],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.NodesInfoList.slice((this.queryInfo.pagenum-1)*this.queryInfo.pagesize,this.queryInfo.pagenum*this.queryInfo.pagesize),border:"",stripe:"",id:"infoTable"}},[a("el-table-column",{attrs:{type:"index",label:"#",sortable:"",width:"30"}}),a("el-table-column",{attrs:{label:"Name",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-link",[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return e.showNameDialog(t.row.id)}}})]),e._v(" "+e._s(t.row.nodeName)+" ")],1)]}}])}),a("el-table-column",{attrs:{prop:"macAddress",label:"Mac Address",width:"140"}}),a("el-table-column",{attrs:{prop:"Parent",label:"Parent",width:"140",sortable:""}}),a("el-table-column",{attrs:{prop:"Rssi",label:"Rssi",sortable:""}}),a("el-table-column",{attrs:{prop:"Layer",label:"Layer",sortable:""}}),a("el-table-column",{attrs:{prop:"Plat",sortable:"",label:"Plat"}}),a("el-table-column",{attrs:{prop:"Version",label:"Ver",sortable:""}}),a("el-table-column",{attrs:{prop:"Board",label:"Board",sortable:""}}),a("el-table-column",{attrs:{prop:"avrVer",label:"Avr ver",width:"120",sortable:""}})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20,40],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]],2),a("el-dialog",{staticClass:"firmwareDialog",attrs:{title:"Firmware Upload",visible:e.firmwareDialogVisible,width:"320px"},on:{"update:visible":function(t){e.firmwareDialogVisible=t},close:e.firmwareDialogClosed}},[a("el-dialog",{attrs:{width:"340px",title:"Choose Node",visible:e.chooseNodeVisible,"append-to-body":""},on:{"update:visible":function(t){e.chooseNodeVisible=t},close:e.chooseNodeClosed}},[a("el-form",{ref:"chooseNodeFormRef",staticClass:"chooseNodeForm",attrs:{model:e.chooseNodeForm}},[a("el-form-item",[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.chooseNodeForm.index,callback:function(t){e.$set(e.chooseNodeForm,"index",t)},expression:"chooseNodeForm.index"}},e._l(e.chooseNodeForm.nodeList,(function(t,r){return a("el-radio",{key:t.macADR,staticStyle:{width:"120px"},attrs:{label:r}},[e._v(e._s(t.nodeName?t.nodeName:t.macADR))])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.chooseNodeVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseNodeConfirm()}}},[e._v("confirm")])],1)],1),a("el-form",{ref:"firmwareFormRef",staticClass:"firmwareForm",attrs:{model:e.firmwareForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Board"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.firmwareForm.Board,callback:function(t){e.$set(e.firmwareForm,"Board",t)},expression:"firmwareForm.Board"}},[a("el-radio",{attrs:{label:"ESP32"}},[e._v("ESP32")]),a("el-radio",{attrs:{label:"AVR"}},[e._v("AVR")])],1)],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",limit:1,accept:"application/octet-stream, *.bin",action:"http://192.168.5.1:3000/api/upload/","on-success":e.uploadSucceed,"on-error":e.uploadErr,"on-change":e.beforeUpload,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text",attrs:{align:"center"}},[e._v("Please drag the firmware here, or click to upload")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip",align:"center"},slot:"tip"},[e._v('example for ESP32: "demesh_m5stick_6_3.bin"')])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.firmwareDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.firmwareDialogConfirm()}}},[e._v("confirm")])],1)],1),a("el-dialog",{staticClass:"NameDialog",attrs:{title:"edit node name",visible:e.NameDialogVisible,width:"300px"},on:{"update:visible":function(t){e.NameDialogVisible=t},close:e.nameDialogClosed}},[a("el-form",{ref:"nameFormRef",attrs:{model:e.nameForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Mac address",prop:"macADR"}},[a("el-input",{attrs:{disabled:""},model:{value:e.nameForm.macADR,callback:function(t){e.$set(e.nameForm,"macADR",t)},expression:"nameForm.macADR"}})],1),a("el-form-item",{attrs:{label:"Node name",prop:"nodeName"}},[a("el-input",{attrs:{clearable:"",maxlength:"15"},model:{value:e.nameForm.nodeName,callback:function(t){e.$set(e.nameForm,"nodeName",t)},expression:"nameForm.nodeName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.NameDialogVisible=!1}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.NameDialogConfirm}},[e._v("save")])],1)],1)],1)},A=[],I=(a("fb6a"),a("b0c0"),a("ac1f"),a("841c"),a("add5")),L=a.n(I),O={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10},NodesInfoList:[],total:0,nodeInfo:{},firmwareDialogVisible:!1,firmwareForm:{},chooseNodeVisible:!1,chooseNodeForm:{nodeList:[],index:-1},NameDialogVisible:!1,nameForm:{}}},created:function(){this.getNodesInfoList()},methods:{getNodesInfoList:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("nodes/list");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("Failed to receive the information of nodes"));case 6:for(e.NodesInfoList=r.data,e.total=r.data.length,s=0;s<e.NodesInfoList.length;s++)for(n=e.NodesInfoList[s].macADR,e.NodesInfoList[s].macAddress="",o=0;o<n.length;o++)e.NodesInfoList[s].macAddress+=n[o],o%2===1&&o<n.length-1&&(e.NodesInfoList[s].macAddress+=":");case 9:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getNodesInfoList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getNodesInfoList()},print:function(e){var t=document.querySelector("#"+e).innerHTML,a=document.createElement("div"),r="printDOMElement";a.id=r,a.innerHTML=t;for(var s=a.querySelectorAll(".el-table__header-wrapper th"),n=[],o=0,i=s.length;o<i;o++)""!==s[o].innerText&&n.push(s[o].innerText);a.querySelector(".hidden-columns").remove(),a.querySelector(".el-table__header-wrapper").remove();for(var l="<tr>",u=0,c=n.length;u<c;u++)l+='<td style="font-weight: bold">'+n[u]+"</td>";l+="</tr>",a.querySelector(".el-table__body-wrapper table").insertAdjacentHTML("afterbegin",l),document.querySelector("body").appendChild(a),L()({printable:r,type:"html",scanStyles:!1,style:" table tr td,th { border-collapse: collapse;padding: 5px;border:1px #000 solid; }"}),a.remove()},showFirmwareDialog:function(){for(var e=0,t=0;t<this.NodesInfoList.length;t++)this.NodesInfoList[t].connect&&(this.chooseNodeForm.nodeList[e]=this.NodesInfoList[t],e++);this.firmwareDialogVisible=!0},firmwareDialogClosed:function(){this.$refs.firmwareFormRef.resetFields()},firmwareDialogConfirm:function(){"ESP32"===this.firmwareForm.Board?(this.$refs.upload.submit(),this.firmwareDialogVisible=!1):"AVR"===this.firmwareForm.Board&&(this.chooseNodeVisible=!0)},uploadSucceed:function(e,t,a){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var s,n,o,i,l,u,c,m,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("ESP32"!==r.firmwareForm.Board){e.next=13;break}return s=t.name.length,n=t.name[s-7]+"."+t.name[s-5],o=t.name.slice(7,-8),e.next=6,r.$http.post("upload/ESP32",{Board:o,Version:n});case 6:i=e.sent,l=i.data,202!==l.meta.status&&r.$message.error("ESP32 cannot download the firmware!"),a.pop(),r.$message.success("ESP32 will download the firmware now."),e.next=25;break;case 13:if("AVR"!==r.firmwareForm.Board){e.next=25;break}return u=r.chooseNodeForm.index,c=r.chooseNodeForm.nodeList[u].nodeName?r.chooseNodeForm.nodeList[u].nodeName:r.chooseNodeForm.nodeList[u].macADR,e.next=18,r.$http.post("upload/AVR",{fileName:t.name,macADR:r.chooseNodeForm.nodeList[u].macADR,macAddress:r.chooseNodeForm.nodeList[u].macAddress});case 18:m=e.sent,d=m.data,202!==d.meta.status&&r.$message.error("Node "+c+" cannot download the firmware for AVR!"),a.pop(),r.chooseNodeForm.index=-1,r.$message.success("Node "+c+"will download the firmware for AVR now."),setTimeout((function(){r.getNodesInfoList()}),5e3);case 25:case"end":return e.stop()}}),e)})))()},uploadErr:function(){this.$message.error("Failed to upload the firmware!")},beforeUpload:function(e,t){if(void 0===this.firmwareForm.Board)return this.$message.warning("Please choose type of board before upload."),t.pop(),!1;if("ESP32"===this.firmwareForm.Board){if(e.name.search("m5stick")<0)return t.pop(),this.$message.warning('File name should contain "m5stick".'),!1;if(e.name.search("demesh_")<0)return t.pop(),this.$message.warning('File name should contain "demesh".'),!1}},chooseNodeConfirm:function(){this.chooseNodeForm.index<0?this.$message.warning("Please select the node where AVR firmware needs to be uploaded."):(this.$refs.upload.submit(),this.chooseNodeVisible=!1,this.firmwareDialogVisible=!1)},chooseNodeClosed:function(){this.$refs.chooseNodeFormRef.resetFields()},showNameDialog:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("nodes/list?id="+e);case 2:if(r=a.sent,s=r.data,200===s.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("Failed to read the information of node"));case 6:t.nameForm=s.data,t.NameDialogVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},nameDialogClosed:function(){this.$refs.nameFormRef.resetFields()},NameDialogConfirm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("nodes/list",{id:e.nameForm.id,nodeName:e.nameForm.nodeName});case 2:if(a=t.sent,r=a.data,e.NameDialogVisible=!1,401!==r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.warning("Please log in as admin to operate."));case 7:if(202===r.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error("Failed to change the name of node！"));case 9:return e.getNodesInfoList(),t.abrupt("return",e.$message.success("The name of the node has been successfully modified！"));case 11:case"end":return t.stop()}}),t)})))()}}},M=O,j=(a("d22e"),a("9bb4"),Object(l["a"])(M,V,A,!1,null,"34c9e94c",null)),z=j.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("Center")]),a("el-breadcrumb-item",[e._v("Mesh Status")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{attrs:{span:10}},[e._v("Mesh Monitor")]),a("el-col",{attrs:{span:6,offset:8}})],1)],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.HomeData,border:"",stripe:"","max-height":"250"}},[a("el-table-column",{attrs:{label:"nodeNum",align:"center"}},[a("el-table-column",{attrs:{prop:"totalNum",label:"total"}}),a("el-table-column",{attrs:{prop:"activeNum",label:"active"}})],1),a("el-table-column",{attrs:{prop:"totalCur1",label:"total cur1 /A"}}),a("el-table-column",{attrs:{prop:"totalCur2",label:"total cur2 /A"}}),a("el-table-column",{attrs:{prop:"totalCur3",label:"total cur3 /A"}}),a("el-table-column",{attrs:{prop:"maxCurrentValue",label:"max current /A"}})],1)]],2)],1)},q=[],U=(a("a9e3"),a("d3b7"),a("25f0"),a("466d"),{data:function(){return{HomeData:[{totalNum:0,activeNum:0,totalCurrent:0,maxCurrentValue:0,safeCurrentValue:0,averageMax:0}]}},created:function(){this.getMeshInfo(),this.keepAlive()},methods:{getMeshInfo:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("mesh/setting");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("Failed to receive the setting of mesh"));case 6:return e.HomeData[0].maxCurrentValue=r.data.wholeMax,e.HomeData[0].safeCurrentValue=r.data.safeMax,t.next=10,e.$http.get("nodes/status");case 10:if(s=t.sent,n=s.data,200===n.meta.status){t.next=14;break}return t.abrupt("return",e.$message.error("Failed to receive the status of nodes"));case 14:for(e.totalNum=n.data.length,e.HomeData[0].activeNum=0,e.HomeData[0].totalCur1=0,e.HomeData[0].totalCur2=0,e.HomeData[0].totalCur3=0,o=0;o<n.data.length;o++)n.data[o].connect&&n.data[o].workStatus>=10&&n.data[o].workStatus<60&&(e.HomeData[0].activeNum++,e.HomeData[0].totalCur1+=n.data[o].Cur1,e.HomeData[0].totalCur2+=n.data[o].Cur2,e.HomeData[0].totalCur3+=n.data[o].Cur3);e.HomeData[0].totalCur1=Number(e.HomeData[0].totalCur1.toString().match(/^\d+(?:\.\d{0,2})?/)),e.HomeData[0].totalCur2=Number(e.HomeData[0].totalCur2.toString().match(/^\d+(?:\.\d{0,2})?/)),e.HomeData[0].totalCur3=Number(e.HomeData[0].totalCur3.toString().match(/^\d+(?:\.\d{0,2})?/)),e.HomeData[0].totalNum=e.totalNum;case 24:case"end":return t.stop()}}),t)})))()},keepAlive:function(){var e=this;setInterval((function(){e.getMeshInfo()}),3e3)}}}),W=U,B=(a("b453"),a("9bf6"),Object(l["a"])(W,E,q,!1,null,"7f73a6ea",null)),H=B.exports,T=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v(" Welcome to the console of loadstation Here you could check the data of the mesh and edit each node. ")])])}],G={},K=Object(l["a"])(G,T,J,!1,null,null,null),Q=K.exports;r["default"].use(m["a"]);var X=new m["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",component:w},{path:"/home",component:N,redirect:"/default",children:[{path:"/default",component:H},{path:"/nodesStatus",component:P},{path:"/nodesInfo",component:z},{path:"/setting",component:Q}]}]});X.beforeEach((function(e,t,a){if("/login"===e.path)return a();var r=window.sessionStorage.getItem("token");if(!r)return a("/login");a()}));var Y=X,Z=(a("0fb7"),a("450d"),a("f529")),ee=a.n(Z),te=(a("f225"),a("89a9")),ae=a.n(te),re=(a("279e"),a("7d94")),se=a.n(re),ne=(a("d4df"),a("7fc1")),oe=a.n(ne),ie=(a("560b"),a("dcdc")),le=a.n(ie),ue=(a("fd71"),a("a447")),ce=a.n(ue),me=(a("fe07"),a("6ac5")),de=a.n(me),pe=(a("b5d8"),a("f494")),fe=a.n(pe),he=(a("a7cc"),a("df33")),be=a.n(he),ge=(a("672e"),a("101e")),we=a.n(ge),ve=(a("0c67"),a("299c")),xe=a.n(ve),ke=(a("e960"),a("b35b")),Ce=a.n(ke),Fe=(a("5466"),a("ecdf")),Ne=a.n(Fe),ye=(a("38a0"),a("ad41")),De=a.n(ye),$e=(a("f4f9"),a("c2cc")),Re=a.n($e),_e=(a("7a0f"),a("0f6c")),Se=a.n(_e),Pe=(a("b8e0"),a("a4c4")),Ve=a.n(Pe),Ae=(a("b84d"),a("c216")),Ie=a.n(Ae),Le=(a("8f24"),a("76b9")),Oe=a.n(Le),Me=(a("34db"),a("3803")),je=a.n(Me),ze=(a("8bd8"),a("4cb2")),Ee=a.n(ze),qe=(a("ce18"),a("f58e")),Ue=a.n(qe),We=(a("4ca3"),a("443e")),Be=a.n(We),He=(a("bdc7"),a("aa2f")),Te=a.n(He),Je=(a("de31"),a("c69e")),Ge=a.n(Je),Ke=(a("a769"),a("5cc3")),Qe=a.n(Ke),Xe=(a("a673"),a("7b31")),Ye=a.n(Xe),Ze=(a("adec"),a("3d2d")),et=a.n(Ze),tt=(a("eca7"),a("3787")),at=a.n(tt),rt=(a("425f"),a("4105")),st=a.n(rt),nt=(a("10cb"),a("f3ad")),ot=a.n(nt),it=(a("1951"),a("eedf")),lt=a.n(it),ut=a("b2d6"),ct=a.n(ut),mt=a("4897"),dt=a.n(mt);dt.a.use(ct.a),r["default"].use(lt.a),r["default"].use(ot.a),r["default"].use(st.a),r["default"].use(at.a),r["default"].use(et.a),r["default"].use(Ye.a),r["default"].use(Qe.a),r["default"].use(Ge.a),r["default"].use(Te.a),r["default"].use(Be.a),r["default"].use(Ue.a),r["default"].use(Ee.a),r["default"].use(je.a),r["default"].use(Oe.a),r["default"].use(Ie.a),r["default"].use(Ve.a),r["default"].use(Se.a),r["default"].use(Re.a),r["default"].use(De.a),r["default"].use(Ne.a),r["default"].use(Ce.a),r["default"].use(xe.a),r["default"].use(we.a),r["default"].use(be.a),r["default"].use(fe.a),r["default"].use(de.a),r["default"].use(ce.a),r["default"].use(le.a),r["default"].use(oe.a),r["default"].use(se.a),r["default"].use(ae.a),r["default"].prototype.$message=ee.a;a("aede");var pt=a("bc3a"),ft=a.n(pt),ht=a("323e"),bt=a.n(ht);a("a5d8");dt.a.use(ct.a),ft.a.defaults.baseURL="http://localhost:3000/api/",ft.a.interceptors.request.use((function(e){return bt.a.start(),e.headers.Authorization=window.sessionStorage.getItem("token"),e})),ft.a.interceptors.response.use((function(e){return bt.a.done(),e})),r["default"].prototype.$http=ft.a,r["default"].config.productionTip=!1,new r["default"]({router:Y,render:function(e){return e(c)}}).$mount("#app")},"796e":function(e,t,a){},"79ef":function(e,t,a){},"7e41":function(e,t,a){"use strict";a("06cf3")},"9bb4":function(e,t,a){"use strict";a("79ef")},"9bf6":function(e,t,a){"use strict";a("ffe3")},a18c:function(e,t,a){},ae48:function(e,t,a){},aede:function(e,t,a){},b453:function(e,t,a){"use strict";a("bb1d")},b4b2:function(e,t,a){"use strict";a("f67b")},bb1d:function(e,t,a){},d22e:function(e,t,a){"use strict";a("796e")},e05e:function(e,t,a){"use strict";a("ae48")},f67b:function(e,t,a){},ffe3:function(e,t,a){}});
//# sourceMappingURL=app.92959224.js.map